
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A programming language that fights back against AI slop and code scraping">
      
      
      
        <link rel="canonical" href="https://kennedyshead.github.io/prove/syntax/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../types/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.3">
    
    
      
        <title>Syntax Reference - Prove</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#syntax-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Prove" class="md-header__button md-logo" aria-label="Prove" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prove
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Syntax Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://code.botwork.se/Botwork/prove" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Botwork/prove
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Prove" class="md-nav__button md-logo" aria-label="Prove" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Prove
  </label>
  
    <div class="md-nav__source">
      <a href="https://code.botwork.se/Botwork/prove" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Botwork/prove
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Language
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Language
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Syntax Reference
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Syntax Reference
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#naming" class="md-nav__link">
    <span class="md-ellipsis">
      
        Naming
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modules-and-imports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modules and Imports
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blocks-and-indentation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Blocks and Indentation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#primitive-types-full-names-no-shorthands" class="md-nav__link">
    <span class="md-ellipsis">
      
        Primitive Types — Full Names, No Shorthands
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type Definitions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#function-declarations-intent-verbs" class="md-nav__link">
    <span class="md-ellipsis">
      
        Function Declarations — Intent Verbs
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verb-dispatched-identity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verb-Dispatched Identity
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-aware-call-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context-Aware Call Resolution
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#variable-declarations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Variable Declarations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-inference-with-formatter-enforcement" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type Inference with Formatter Enforcement
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io-and-fallibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        IO and Fallibility
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#body-marker-from" class="md-nav__link">
    <span class="md-ellipsis">
      
        Body Marker: from
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pattern-matching-the-only-way-to-branch" class="md-nav__link">
    <span class="md-ellipsis">
      
        Pattern Matching — The Only Way to Branch
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Pattern Matching — The Only Way to Branch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#why-no-if" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why No if
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-rule" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Rule
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambdas-constrained-inline-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lambdas — Constrained Inline Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iteration-no-loops" class="md-nav__link">
    <span class="md-ellipsis">
      
        Iteration — No Loops
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#keyword-exclusivity" class="md-nav__link">
    <span class="md-ellipsis">
      
        Keyword Exclusivity
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Keyword Exclusivity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#contracts-requires-ensures-proof" class="md-nav__link">
    <span class="md-ellipsis">
      
        Contracts: requires, ensures, proof
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#module-level-narrative-domain-temporal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Module-level: narrative, domain, temporal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-level-why_not-chosen-near_miss" class="md-nav__link">
    <span class="md-ellipsis">
      
        Function-level: why_not, chosen, near_miss
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#confidence-know-assume-believe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Confidence: know, assume, believe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intent-intent" class="md-nav__link">
    <span class="md-ellipsis">
      
        Intent: intent
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#invariants-invariant_network-satisfies" class="md-nav__link">
    <span class="md-ellipsis">
      
        Invariants: invariant_network, satisfies
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#error-propagation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Error Propagation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complete-example-restful-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete Example: RESTful Server
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Type System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contracts & Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../compiler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Compiler
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai-resistance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AI Resistance
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Design
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Decisions & Trade-offs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../inspirations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inspirations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="syntax-reference">Syntax Reference<a class="headerlink" href="#syntax-reference" title="Permanent link">&para;</a></h1>
<h2 id="naming">Naming<a class="headerlink" href="#naming" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Types, modules, and classes</strong>: CamelCase — <code>Shape</code>, <code>Port</code>, <code>UserAuth</code>, <code>NonEmpty</code>, <code>HttpServer</code></li>
<li><strong>Variables and parameters</strong>: snake_case — <code>port</code>, <code>user_list</code>, <code>max_retries</code>, <code>db_connection</code></li>
<li><strong>Functions</strong>: snake_case — <code>area</code>, <code>binary_search</code>, <code>get_users</code></li>
<li><strong>Constants</strong>: UPPER_SNAKE_CASE — <code>MAX_CONNECTIONS</code>, <code>LOOKUP_TABLE</code>, <code>DEFAULT_PORT</code></li>
<li><strong>Effects</strong>: CamelCase — <code>IO</code>, <code>Fail</code>, <code>Async</code></li>
</ul>
<p>The compiler <strong>enforces</strong> casing. Wrong case is a compile error, not a warning. UPPER_SNAKE_CASE indicates a compile-time constant — no <code>const</code> keyword needed.</p>
<h2 id="modules-and-imports">Modules and Imports<a class="headerlink" href="#modules-and-imports" title="Permanent link">&para;</a></h2>
<p>Each file is a module. The filename (without extension) is the module name in CamelCase. The <code>module</code> block is mandatory and contains all declarations/metadata: narrative, imports, types, constants, and invariant networks. Functions remain top-level:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">module</span> <span class="nc">InventoryService</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>  <span class="kn">narrative</span><span class="p">:</span> <span class="s">&quot;&quot;&quot;Products are added to inventory...&quot;&quot;&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>  <span class="kt">String</span> <span class="n">contains</span> <span class="n">length</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  <span class="nc">Auth</span> <span class="kd">validates</span> <span class="n">login</span><span class="p">,</span> <span class="kd">transforms</span> <span class="n">login</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  <span class="nc">Http</span> <span class="kd">inputs</span> <span class="n">request</span> <span class="n">session</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  <span class="k">type</span> <span class="nc">Product</span> <span class="k">is</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">sku</span> <span class="nc">Sku</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>    <span class="n">name</span> <span class="kt">String</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>  <span class="no">MAX_CONNECTIONS</span> <span class="k">as</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="mi">1024</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>  <span class="kn">invariant_network</span> <span class="nc">Accounting</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>    <span class="n">total</span> <span class="o">&gt;=</span> <span class="mi">0</span>
</code></pre></div>
<p>A verb applies to all space-separated names that follow it. Commas separate verb groups. Multiple verbs for the same function name import each variant. The verb is part of the function's identity.</p>
<h2 id="blocks-and-indentation">Blocks and Indentation<a class="headerlink" href="#blocks-and-indentation" title="Permanent link">&para;</a></h2>
<p>No curly braces. Indentation defines scope (like Python). No semicolons — newlines terminate statements. Newlines are suppressed after operators, commas, opening brackets, <code>-&gt;</code>, <code>=&gt;</code>.</p>
<h2 id="primitive-types-full-names-no-shorthands">Primitive Types — Full Names, No Shorthands<a class="headerlink" href="#primitive-types-full-names-no-shorthands" title="Permanent link">&para;</a></h2>
<p>Every type uses its full name. No abbreviations. Type modifiers use bracket syntax <code>Type:[Modifier ...]</code> for storage and representation concerns. Value constraints belong in refinement types (<code>where</code>), not modifiers.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Modifier Axes</th>
<th>Default</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Integer</code></td>
<td>size (8/16/32/64/128), signedness (Signed/Unsigned)</td>
<td><code>Integer:[64 Signed]</code></td>
<td><code>Integer:[32 Unsigned]</code>, <code>Integer:[8]</code></td>
</tr>
<tr>
<td><code>Decimal</code></td>
<td>precision (32/64/128), scale (Scale:N)</td>
<td><code>Decimal:[64]</code></td>
<td><code>Decimal:[128 Scale:2]</code></td>
</tr>
<tr>
<td><code>Float</code></td>
<td>precision (32/64)</td>
<td><code>Float:[64]</code></td>
<td><code>Float:[32]</code></td>
</tr>
<tr>
<td><code>Boolean</code></td>
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><code>String</code></td>
<td>encoding (UTF8/ASCII/UTF16), max length</td>
<td><code>String:[UTF8]</code></td>
<td><code>String:[UTF8 15]</code>, <code>String:[ASCII 255]</code></td>
</tr>
<tr>
<td><code>Byte</code></td>
<td>—</td>
<td>—</td>
<td>Distinct type for binary data</td>
</tr>
<tr>
<td><code>Character</code></td>
<td>encoding (UTF8/UTF16/ASCII)</td>
<td><code>Character:[UTF8]</code></td>
<td><code>Character:[ASCII]</code></td>
</tr>
</tbody>
</table>
<p><strong>Modifier rules:</strong>
- Modifiers are <strong>order-independent</strong> — <code>Integer:[Signed 64]</code> and <code>Integer:[64 Signed]</code> are identical. The compiler normalizes internally.
- Each modifier occupies a <strong>distinct axis</strong>. Two modifiers on the same axis is a compile error: <code>Integer:[32 64]</code> → ERROR: conflicting size modifiers.
- <strong>Positional modifiers</strong> when unambiguous by kind. <strong>Named modifiers</strong> (<code>Key:Value</code>) when a bare value could be confused: <code>Decimal:[128 Scale:2]</code>.
- Bare type name uses sensible defaults: <code>Integer</code> means <code>Integer:[64 Signed]</code>, <code>String</code> means <code>String:[UTF8]</code>, <code>Decimal</code> means <code>Decimal:[64]</code>.
- <strong><code>Float</code> is opt-in</strong> — <code>Decimal</code> is the default for fractional numbers. <code>Float:[64]</code> uses IEEE 754 hardware floats for performance-critical domains (scientific computing, graphics, signal processing) where speed matters more than exact precision. Mixing <code>Float</code> and <code>Decimal</code> requires explicit conversion.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">count</span> <span class="k">as</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="mi">42</span>                          <span class="c1">// Integer:[64 Signed]</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">flags</span> <span class="k">as</span> <span class="kt">Integer</span><span class="p">:[</span><span class="mi">8</span> <span class="nc">Unsigned</span><span class="p">]</span> <span class="o">=</span> <span class="mh">0xFF</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">price</span> <span class="k">as</span> <span class="kt">Decimal</span><span class="p">:[</span><span class="mi">128</span> <span class="nc">Scale</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mf">19.99</span>         <span class="c1">// financial precision</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">name</span> <span class="k">as</span> <span class="kt">String</span> <span class="o">=</span> <span class="s">&quot;Alice&quot;</span>                        <span class="c1">// String:[UTF8]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">code</span> <span class="k">as</span> <span class="kt">String</span><span class="p">:[</span><span class="no">ASCII</span> <span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;US01&quot;</span>              <span class="c1">// ASCII, max 4 characters</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">active</span> <span class="k">as</span> <span class="kt">Boolean</span> <span class="o">=</span> <span class="kc">true</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">raw</span> <span class="k">as</span> <span class="kt">Byte</span> <span class="o">=</span> <span class="mh">0x2A</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">letter</span> <span class="k">as</span> <span class="kt">Character</span> <span class="o">=</span> <span class="err">&#39;</span><span class="nc">A</span><span class="err">&#39;</span>
</code></pre></div>
<p><strong>Separation of concerns</strong> — modifiers describe <em>storage</em>, refinements describe <em>values</em>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// Modifier: how it&#39;s stored</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">raw_port</span> <span class="k">as</span> <span class="kt">Integer</span><span class="p">:[</span><span class="mi">16</span> <span class="nc">Unsigned</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8080</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="c1">// Refinement: what values are valid</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="k">type</span> <span class="nc">Port</span> <span class="k">is</span> <span class="kt">Integer</span> <span class="k">where</span> <span class="mi">1</span><span class="o">..</span><span class="mi">65535</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="c1">// Combined: storage + value constraint</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="k">type</span> <span class="nc">Port</span> <span class="k">is</span> <span class="kt">Integer</span><span class="p">:[</span><span class="mi">16</span> <span class="nc">Unsigned</span><span class="p">]</span> <span class="k">where</span> <span class="mi">1</span><span class="o">..</span><span class="mi">65535</span>
</code></pre></div>
<h2 id="type-definitions">Type Definitions<a class="headerlink" href="#type-definitions" title="Permanent link">&para;</a></h2>
<p>Types live inside the <code>module</code> block, defined with <code>type Name is</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">module</span> <span class="nc">Main</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>  <span class="k">type</span> <span class="nc">Shape</span> <span class="k">is</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>    <span class="nc">Circle</span><span class="p">(</span><span class="n">radius</span> <span class="kt">Decimal</span><span class="p">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="p">|</span> <span class="nc">Rect</span><span class="p">(</span><span class="n">w</span> <span class="kt">Decimal</span><span class="p">,</span> <span class="n">h</span> <span class="kt">Decimal</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>  <span class="k">type</span> <span class="nc">Port</span> <span class="k">is</span> <span class="kt">Integer</span><span class="p">:[</span><span class="mi">16</span> <span class="nc">Unsigned</span><span class="p">]</span> <span class="k">where</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">65535</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>  <span class="k">type</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="nc">T</span><span class="p">,</span> <span class="nc">E</span><span class="o">&gt;</span> <span class="k">is</span> <span class="nc">Ok</span><span class="p">(</span><span class="nc">T</span><span class="p">)</span> <span class="p">|</span> <span class="nc">Err</span><span class="p">(</span><span class="nc">E</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>  <span class="k">type</span> <span class="nc">User</span> <span class="k">is</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    <span class="n">id</span> <span class="kt">Integer</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>    <span class="n">name</span> <span class="kt">String</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>    <span class="n">email</span> <span class="kt">String</span>
</code></pre></div>
<h2 id="function-declarations-intent-verbs">Function Declarations — Intent Verbs<a class="headerlink" href="#function-declarations-intent-verbs" title="Permanent link">&para;</a></h2>
<p>Functions are declared with a <strong>verb</strong> that describes their purpose. No <code>fn</code>, no <code>function</code> keyword — the verb IS the declaration. The compiler verifies the implementation matches the declared intent.</p>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Purpose</th>
<th>Compiler enforces</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>transforms</code></td>
<td>Pure data computation/conversion</td>
<td>No <code>!</code>. Failure encoded in return type (<code>Result</code>, <code>Option</code>)</td>
</tr>
<tr>
<td><code>inputs</code></td>
<td>Reads/receives from external world</td>
<td>IO is inherent. <code>!</code> marks fallibility. Implicit match when first param is algebraic</td>
</tr>
<tr>
<td><code>outputs</code></td>
<td>Writes/sends to external world</td>
<td>IO is inherent. <code>!</code> marks fallibility</td>
</tr>
<tr>
<td><code>validates</code></td>
<td>Pure boolean check</td>
<td>No <code>!</code>. Return type is implicitly <code>Boolean</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">transforms</span> <span class="n">area</span><span class="p">(</span><span class="n">s</span> <span class="nc">Shape</span><span class="p">)</span> <span class="kt">Decimal</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="k">from</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    <span class="k">match</span> <span class="n">s</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>        <span class="nc">Circle</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">r</span> <span class="o">*</span> <span class="n">r</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        <span class="nc">Rect</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">w</span> <span class="o">*</span> <span class="n">h</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="kd">validates</span> <span class="n">email</span><span class="p">(</span><span class="n">address</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="k">from</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>    <span class="n">contains</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;@&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">contains</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="kd">transforms</span> <span class="n">normalize</span><span class="p">(</span><span class="n">data</span> <span class="kt">List</span><span class="o">&lt;</span><span class="kt">Decimal</span><span class="o">&gt;</span><span class="p">)</span> <span class="kt">List</span><span class="o">&lt;</span><span class="kt">Decimal</span><span class="o">&gt;</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>  <span class="kn">ensures</span> <span class="n">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">==</span> <span class="n">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="k">from</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>    <span class="n">max_val</span> <span class="k">as</span> <span class="kt">Decimal</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>    <span class="n">divide_each</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">max_val</span><span class="p">)</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="kd">transforms</span> <span class="n">parse</span><span class="p">(</span><span class="n">raw</span> <span class="kt">String</span><span class="p">)</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="nc">Config</span><span class="p">,</span> <span class="nc">ParseError</span><span class="o">&gt;</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="k">from</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>    <span class="n">decode</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a><span class="kd">inputs</span> <span class="n">users</span><span class="p">()</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span><span class="kp">!</span>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a><span class="k">from</span>
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>    <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a><span class="kd">outputs</span> <span class="n">log</span><span class="p">(</span><span class="n">message</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a><span class="k">from</span>
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>    <span class="n">write</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a><span class="kd">inputs</span> <span class="n">request</span><span class="p">(</span><span class="n">route</span> <span class="nc">Route</span><span class="p">,</span> <span class="n">req</span> <span class="nc">Request</span><span class="p">)</span> <span class="nc">Response</span><span class="kp">!</span>
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a><span class="k">from</span>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>        <span class="nc">Get</span><span class="p">(</span><span class="o">/</span><span class="n">health</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">ok</span><span class="p">(</span><span class="s">&quot;healthy&quot;</span><span class="p">)</span>
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>        <span class="nc">Get</span><span class="p">(</span><span class="o">/</span><span class="n">users</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">users</span><span class="p">()</span><span class="kp">!</span> <span class="o">|&gt;</span> <span class="n">ok</span>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>        <span class="nc">Post</span><span class="p">(</span><span class="o">/</span><span class="n">users</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">create</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">body</span><span class="p">)</span><span class="kp">!</span> <span class="o">|&gt;</span> <span class="n">created</span>
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>        <span class="n">_</span> <span class="p">=&gt;</span> <span class="n">not_found</span><span class="p">()</span>
</code></pre></div>
<h2 id="verb-dispatched-identity">Verb-Dispatched Identity<a class="headerlink" href="#verb-dispatched-identity" title="Permanent link">&para;</a></h2>
<p>Functions are identified by the triple <code>(verb, name, parameter types)</code> — not just <code>(name, parameter types)</code>. The same function name can be declared multiple times with different verbs, each with a distinct meaning:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">validates</span> <span class="n">email</span><span class="p">(</span><span class="n">address</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">from</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>    <span class="n">contains</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;@&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">contains</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="kd">transforms</span> <span class="n">email</span><span class="p">(</span><span class="n">raw</span> <span class="kt">String</span><span class="p">)</span> <span class="nc">Email</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="k">from</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="n">lowercase</span><span class="p">(</span><span class="n">trim</span><span class="p">(</span><span class="n">raw</span><span class="p">))</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="kd">inputs</span> <span class="n">email</span><span class="p">(</span><span class="n">user_id</span> <span class="kt">Integer</span><span class="p">)</span> <span class="nc">Email</span><span class="kp">!</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="k">from</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>    <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT email FROM users WHERE id = {user_id}&quot;</span><span class="p">)</span><span class="kp">!</span>
</code></pre></div>
<p>Three functions, all named <code>email</code>, with completely different intents.</p>
<h2 id="context-aware-call-resolution">Context-Aware Call Resolution<a class="headerlink" href="#context-aware-call-resolution" title="Permanent link">&para;</a></h2>
<p>At call sites, you use <strong>just the function name</strong> — the compiler resolves which verb-variant to call based on context (expected type, parameter types, expression position):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">// Predicate context → resolves to validates email</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">clean_list</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">Email</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="kd">inputs</span><span class="p">,</span> <span class="k">valid</span> <span class="n">email</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1">// Email context + String param → resolves to transforms email</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="n">clean</span> <span class="k">as</span> <span class="nc">Email</span> <span class="o">=</span> <span class="n">email</span><span class="p">(</span><span class="n">raw_input</span><span class="p">)</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="c1">// Email context + Integer param → resolves to inputs email</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">stored</span> <span class="k">as</span> <span class="nc">Email</span> <span class="o">=</span> <span class="n">email</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="c1">// When context is ambiguous, use `valid` for explicit Boolean cast</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="n">print</span><span class="p">(</span><span class="k">valid</span> <span class="n">email</span><span class="p">(</span><span class="n">input</span><span class="p">))</span>               <span class="c1">// forces validates variant</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="c1">// `valid` as type-cast parameter — passes the validates function itself</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="n">filter</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="k">valid</span> <span class="n">email</span><span class="p">)</span>              <span class="c1">// passes `validates email` as predicate</span>
</code></pre></div>
<p>Resolution rules:
1. <strong>Boolean context</strong> (<code>match</code> on Boolean, <code>&amp;&amp;</code>, <code>||</code>, <code>!</code>) → resolves to <code>validates</code> variant
2. <strong>Expected type</strong> from assignment or parameter → matches the variant returning that type
3. <strong>Parameter types</strong> disambiguate between variants with the same return type
4. <strong>Ambiguous</strong> → compiler error with suggestions listing available variants</p>
<p>The <code>valid</code> keyword serves two purposes:
- <strong>As expression</strong>: <code>valid email(input)</code> — casts a validates call to its Boolean result explicitly
- <strong>As function reference</strong>: <code>valid email</code> (no parens) — passes the validates function as a predicate to higher-order functions like <code>filter</code></p>
<p>Implications:</p>
<ul>
<li><strong>Imports are precise</strong>: <code>Auth validates login, inputs session</code></li>
<li><strong>API docs group by verb</strong>: what can you validate? what can you yield? what can you transform?</li>
<li><strong>Call sites are clean</strong>: just the function name in most cases</li>
<li><strong>AI resistance</strong>: declarations require the correct verb, and the resolution rules add non-local reasoning requirements</li>
</ul>
<h2 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h2>
<p>Go-style: <code>name Type</code> (no colon). Inside parentheses, the declaration context is already clear.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">transforms</span> <span class="n">area</span><span class="p">(</span><span class="n">s</span> <span class="nc">Shape</span><span class="p">)</span> <span class="kt">Decimal</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="kd">inputs</span> <span class="n">request</span><span class="p">(</span><span class="n">route</span> <span class="nc">Route</span><span class="p">,</span> <span class="n">body</span> <span class="kt">String</span><span class="p">)</span> <span class="nc">Response</span><span class="kp">!</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="kd">validates</span> <span class="n">email</span><span class="p">(</span><span class="n">address</span> <span class="kt">String</span><span class="p">)</span>
</code></pre></div>
<h2 id="variable-declarations">Variable Declarations<a class="headerlink" href="#variable-declarations" title="Permanent link">&para;</a></h2>
<p>Variables use <code>name as Type = value</code>. The <code>as</code> keyword reads naturally: <em>"port, as a Port, equals 8080"</em>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">port</span> <span class="k">as</span> <span class="nc">Port</span> <span class="o">=</span> <span class="mi">8080</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">server</span> <span class="k">as</span> <span class="nc">Server</span> <span class="o">=</span> <span class="n">new_server</span><span class="p">()</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">config</span> <span class="k">as</span> <span class="nc">Config</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;app.yaml&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">user_list</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">users</span><span class="p">()</span><span class="kp">!</span>
</code></pre></div>
<p>Variables are <strong>immutable by default</strong>. Mutability is a type modifier — it's a storage concern, like size and signedness:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">counter</span> <span class="k">as</span> <span class="kt">Integer</span><span class="p">:[</span><span class="nc">Mutable</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div>
<h2 id="type-inference-with-formatter-enforcement">Type Inference with Formatter Enforcement<a class="headerlink" href="#type-inference-with-formatter-enforcement" title="Permanent link">&para;</a></h2>
<p>The compiler infers types when unambiguous, but <strong><code>prove format</code> always inserts explicit type annotations</strong>. This means you can write clean code during development, and the formatter makes it explicit before commit.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1">// What you write:</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">port</span> <span class="o">=</span> <span class="mi">8080</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="n">server</span> <span class="o">=</span> <span class="n">new_server</span><span class="p">()</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="n">users</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="c1">// What `prove format` produces:</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="n">port</span> <span class="k">as</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="mi">8080</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="n">server</span> <span class="k">as</span> <span class="nc">Server</span> <span class="o">=</span> <span class="n">new_server</span><span class="p">()</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="n">users</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span><span class="kp">!</span>
</code></pre></div>
<p>The LSP shows inferred types inline as you type, so you always know what the compiler deduced. Function signatures are always explicit — inference only applies to local variables.</p>
<p><strong>The language encourages explicit types</strong> — the formatter enforces them. But you're never blocked from writing code because you can't remember whether it's <code>List&lt;Map&lt;String, User&gt;&gt;</code> or <code>Map&lt;String, List&lt;User&gt;&gt;</code>.</p>
<h2 id="io-and-fallibility">IO and Fallibility<a class="headerlink" href="#io-and-fallibility" title="Permanent link">&para;</a></h2>
<p>IO is inherent in the verb — <code>inputs</code> and <code>outputs</code> always interact with the external world. Fallibility is marked with <code>!</code> on the return type. Pure verbs (<code>transforms</code>, <code>validates</code>) have neither IO nor <code>!</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kd">transforms</span> <span class="n">area</span><span class="p">(</span><span class="n">s</span> <span class="nc">Shape</span><span class="p">)</span> <span class="kt">Decimal</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="k">from</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    <span class="n">pi</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">radius</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="kd">inputs</span> <span class="n">users</span><span class="p">()</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span><span class="kp">!</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="k">from</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>    <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="kd">outputs</span> <span class="n">write_log</span><span class="p">(</span><span class="n">entry</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="k">from</span>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>    <span class="n">append</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
</code></pre></div>
<p>Reads as: <em>"inputs users, returns List of User, can fail!"</em></p>
<p>The compiler knows which functions touch the world (<code>inputs</code>/<code>outputs</code>) and which don't (<code>transforms</code>/<code>validates</code>) — the verb IS the declaration.</p>
<h2 id="body-marker-from">Body Marker: <code>from</code><a class="headerlink" href="#body-marker-from" title="Permanent link">&para;</a></h2>
<p>Every function body begins with <code>from</code>. No exceptions. This reads as <em>"the result comes from..."</em> and makes it immediately clear where the implementation starts, whether the function has annotations or not.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="kd">transforms</span> <span class="n">area</span><span class="p">(</span><span class="n">s</span> <span class="nc">Shape</span><span class="p">)</span> <span class="kt">Decimal</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="k">from</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>    <span class="n">pi</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="n">radius</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="kd">inputs</span> <span class="n">users</span><span class="p">()</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span><span class="kp">!</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>  <span class="kn">ensures</span> <span class="n">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="k">from</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>    <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span><span class="kp">!</span>
</code></pre></div>
<h2 id="pattern-matching-the-only-way-to-branch">Pattern Matching — The Only Way to Branch<a class="headerlink" href="#pattern-matching-the-only-way-to-branch" title="Permanent link">&para;</a></h2>
<p>Prove has no <code>if</code>/<code>else</code>. All branching is done through <code>match</code> — and good Prove code rarely matches on booleans at all.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="k">match</span> <span class="n">route</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    <span class="nc">Get</span><span class="p">(</span><span class="s">&quot;/health&quot;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">ok</span><span class="p">(</span><span class="s">&quot;healthy&quot;</span><span class="p">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    <span class="nc">Get</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">)</span>  <span class="p">=&gt;</span> <span class="n">users</span><span class="p">()</span><span class="kp">!</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>    <span class="n">_</span>              <span class="p">=&gt;</span> <span class="n">not_found</span><span class="p">()</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="k">match</span> <span class="n">discount</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>    <span class="nc">FlatOff</span><span class="p">(</span><span class="n">off</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">amount</span> <span class="o">-</span> <span class="n">off</span><span class="p">)</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>    <span class="nc">PercentOff</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">amount</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rate</span><span class="p">)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="no">MAX_CONNECTIONS</span> <span class="k">as</span> <span class="kt">Integer</span> <span class="o">=</span> <span class="k">comptime</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>    <span class="k">match</span> <span class="n">cfg</span><span class="o">.</span><span class="n">target</span>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a>        <span class="s">&quot;embedded&quot;</span> <span class="p">=&gt;</span> <span class="mi">16</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>        <span class="n">_</span> <span class="p">=&gt;</span> <span class="mi">1024</span>
</code></pre></div>
<p>This is not an omission. It is a deliberate design choice.</p>
<h3 id="why-no-if">Why No <code>if</code><a class="headerlink" href="#why-no-if" title="Permanent link">&para;</a></h3>
<p><strong>1. Types replace booleans.</strong></p>
<p>When you reach for <code>if connected then send(data) else retry()</code>, the real question is: what <em>kind</em> of connection state are you in? Model it as a type and the branching becomes meaningful:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">type</span> <span class="nc">Connection</span> <span class="k">is</span> <span class="nc">Active</span><span class="p">(</span><span class="n">socket</span> <span class="nc">Socket</span><span class="p">)</span> <span class="p">|</span> <span class="nc">Disconnected</span><span class="p">(</span><span class="n">reason</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="k">match</span> <span class="n">connection</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    <span class="nc">Active</span><span class="p">(</span><span class="n">socket</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">send</span><span class="p">(</span><span class="n">socket</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    <span class="nc">Disconnected</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">retry</span><span class="p">(</span><span class="n">reason</span><span class="p">)</span>
</code></pre></div>
<p>Each arm names what it handles. No <code>true</code>/<code>false</code> to mentally decode. The compiler enforces that every variant is covered — add a <code>Reconnecting</code> state later and the compiler tells you everywhere you need to handle it.</p>
<p><strong>2. <code>if</code> hides missing cases.</strong></p>
<p>An <code>if</code> without <code>else</code> silently does nothing on the false branch. The programmer may have forgotten it. With types, there's no such escape — every variant must be handled.</p>
<p><strong>3. One construct is simpler than two.</strong></p>
<p><code>if</code>/<code>else</code> adds no expressive power over <code>match</code>. It only adds surface area to the language, the parser, the type checker, the emitter, and every tool that processes Prove code. One construct means less to learn and fewer ways to express the same thing.</p>
<p><strong>4. Contracts replace conditional logic.</strong></p>
<p>Where other languages use <code>if</code> to decide whether to run code, Prove uses validation. Consider:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kd">transforms</span> <span class="n">calculate_total</span><span class="p">(</span><span class="n">items</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">OrderItem</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">discount</span> <span class="nc">Discount</span><span class="p">,</span> <span class="n">tax</span> <span class="nc">TaxRule</span><span class="p">)</span> <span class="nc">Price</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>  <span class="kn">ensures</span> <span class="n">result</span> <span class="o">&gt;=</span> <span class="mi">0</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>  <span class="kn">requires</span> <span class="n">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>  <span class="kn">proof</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    <span class="na">subtotal</span><span class="p">:</span> <span class="n">sums</span> <span class="n">the</span> <span class="n">items</span> <span class="nc">Price</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    <span class="na">apply_discount</span><span class="p">:</span> <span class="n">deduct</span> <span class="n">when</span> <span class="n">discount</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>    <span class="na">apply_tax</span><span class="p">:</span> <span class="n">adds</span> <span class="n">tax</span> <span class="n">when</span> <span class="n">tax</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="k">from</span>
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>    <span class="n">sub</span> <span class="k">as</span> <span class="nc">Price</span> <span class="o">=</span> <span class="n">subtotal</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>    <span class="n">discounted</span> <span class="k">as</span> <span class="nc">Price</span> <span class="o">=</span> <span class="n">apply_discount</span><span class="p">(</span><span class="n">discount</span><span class="p">,</span> <span class="n">sub</span><span class="p">)</span>
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>    <span class="n">apply_tax</span><span class="p">(</span><span class="n">tax</span><span class="p">,</span> <span class="n">discounted</span><span class="p">)</span>
</code></pre></div>
<p>There is no <code>if discount &gt; 0 then apply_discount(...)</code>. Instead, the proof declares <em>when</em> <code>apply_discount</code> is meaningful, and the contract system validates it. The function <code>apply_discount</code> is called — but its <code>requires</code> clause ensures the compiler has already proven the discount is valid before the call happens. The "branching" lives in the type system and contracts, not in boolean conditions.</p>
<p><strong>5. Boolean matching is a code smell.</strong></p>
<p><code>match x &gt; 0 / true =&gt; ... / false =&gt; ...</code> is technically valid but signals that you should model your domain better. Instead of branching on <code>amount &gt; 0</code>, define <code>type Positive is Integer where &gt; 0</code> and let the type system handle it. The branching disappears into the type — where the compiler can prove things about it.</p>
<h3 id="the-rule">The Rule<a class="headerlink" href="#the-rule" title="Permanent link">&para;</a></h3>
<p>Branch on <em>what something is</em>, not on <em>whether something is true</em>. Types and contracts handle the rest — <code>requires</code> guards preconditions, <code>ensures</code> guarantees postconditions, and <code>proof</code> explains why. No boolean branch needed.</p>
<h2 id="lambdas-constrained-inline-functions">Lambdas — Constrained Inline Functions<a class="headerlink" href="#lambdas-constrained-inline-functions" title="Permanent link">&para;</a></h2>
<p>Lambdas are single-expression anonymous functions, used exclusively as arguments to higher-order functions like <code>map</code>, <code>filter</code>, and <code>reduce</code>. They cannot capture mutable state and must be pure.</p>
<p>Syntax: <code>|params| expression</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1">// Filtering with a lambda</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">active_users</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="p">|</span><span class="n">u</span><span class="p">|</span> <span class="n">u</span><span class="o">.</span><span class="n">active</span><span class="p">)</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1">// Mapping with a lambda</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="n">names</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="p">|</span><span class="n">u</span><span class="p">|</span> <span class="n">u</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="c1">// Reducing with a lambda</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="n">total</span> <span class="k">as</span> <span class="kt">Decimal</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">prices</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">|</span><span class="n">acc</span><span class="p">,</span> <span class="n">p</span><span class="p">|</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="c1">// Using `valid` to pass a validates function as predicate (no lambda needed)</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="n">verified_emails</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="n">emails</span><span class="p">,</span> <span class="k">valid</span> <span class="n">email</span><span class="p">)</span>
</code></pre></div>
<p><strong>Constraints:</strong>
- <strong>Single expression only</strong> — no multi-line bodies, no statements. If you need more, write a named function.
- <strong>Must be pure</strong> — no IO effects inside a lambda. Side effects require a named function.
- <strong>No closures over mutable state</strong> — lambdas can reference immutable bindings from the enclosing scope, but not <code>:[Mutable]</code> variables.
- <strong>Only as arguments</strong> — lambdas cannot be assigned to variables or returned from functions. They exist only at the call site of a higher-order function.</p>
<h2 id="iteration-no-loops">Iteration — No Loops<a class="headerlink" href="#iteration-no-loops" title="Permanent link">&para;</a></h2>
<p>Prove has no <code>for</code>, <code>while</code>, or loop constructs. Iteration is expressed through <code>map</code>, <code>filter</code>, <code>reduce</code>, and recursion. This keeps all data transformations as expressions (they produce values) rather than statements.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">// Instead of: for each user, get their name</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">names</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">map</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="p">|</span><span class="n">u</span><span class="p">|</span> <span class="n">u</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="c1">// Instead of: for each item, keep valid ones</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="n">valid_items</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">Item</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="n">items</span><span class="p">,</span> <span class="p">|</span><span class="n">i</span><span class="p">|</span> <span class="n">i</span><span class="o">.</span><span class="n">quantity</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="c1">// Instead of: accumulate a total with a loop</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="n">total</span> <span class="k">as</span> <span class="kt">Decimal</span> <span class="o">=</span> <span class="n">reduce</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">items</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">|</span><span class="n">acc</span><span class="p">,</span> <span class="n">item</span><span class="p">|</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">price</span> <span class="o">*</span> <span class="n">item</span><span class="o">.</span><span class="n">quantity</span><span class="p">)</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="c1">// Chaining with pipe operator</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="n">result</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">users</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>    <span class="o">|&gt;</span> <span class="n">filter</span><span class="p">(|</span><span class="n">u</span><span class="p">|</span> <span class="n">u</span><span class="o">.</span><span class="n">active</span><span class="p">)</span>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>    <span class="o">|&gt;</span> <span class="n">map</span><span class="p">(|</span><span class="n">u</span><span class="p">|</span> <span class="n">u</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>    <span class="o">|&gt;</span> <span class="n">filter</span><span class="p">(</span><span class="k">valid</span> <span class="n">email</span><span class="p">)</span>
</code></pre></div>
<p>For complex iteration that doesn't fit map/filter/reduce, use recursion with a <code>transforms</code> function. The compiler verifies termination through proof obligations.</p>
<h2 id="keyword-exclusivity">Keyword Exclusivity<a class="headerlink" href="#keyword-exclusivity" title="Permanent link">&para;</a></h2>
<p>Every keyword in Prove has exactly one purpose. No keyword is overloaded across different contexts. This makes the language predictable and parseable by humans without memorizing context-dependent rules.</p>
<p><strong>Core keywords:</strong></p>
<table>
<thead>
<tr>
<th>Keyword</th>
<th>What it does</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>transforms</code></td>
<td>Declares a pure function — no side effects, just data in, data out</td>
</tr>
<tr>
<td><code>inputs</code></td>
<td>Declares a function that reads from the outside world (database, file, network)</td>
</tr>
<tr>
<td><code>outputs</code></td>
<td>Declares a function that writes to the outside world</td>
</tr>
<tr>
<td><code>validates</code></td>
<td>Declares a function that returns true or false</td>
</tr>
<tr>
<td><code>main</code></td>
<td>The program's entry point — can freely mix reading and writing</td>
</tr>
<tr>
<td><code>from</code></td>
<td>Marks where the function body starts — "the result comes from..."</td>
</tr>
<tr>
<td><code>where</code></td>
<td>Adds a value constraint to a type — <code>Integer where 1..65535</code></td>
</tr>
<tr>
<td><code>as</code> / <code>is</code></td>
<td><code>as</code> declares a variable — <code>port as Port = 8080</code> (what it's treated as). <code>is</code> defines a type — <code>type Port is Integer</code> (what it is)</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Starts a type definition — <code>type Port is Integer where 1..65535</code></td>
</tr>
<tr>
<td><code>match</code></td>
<td>Branches on a value — the only way to do conditional logic</td>
</tr>
<tr>
<td><code>ensures</code></td>
<td>States what a function guarantees about its result</td>
</tr>
<tr>
<td><code>requires</code></td>
<td>States what must be true before calling a function</td>
</tr>
<tr>
<td><code>proof</code></td>
<td>Explains <em>why</em> the guarantees hold — checked by the compiler</td>
</tr>
<tr>
<td><code>valid</code></td>
<td>References a <code>validates</code> function as a predicate</td>
</tr>
<tr>
<td><code>comptime</code></td>
<td>Runs code at compile time instead of runtime</td>
</tr>
</tbody>
</table>
<h3 id="contracts-requires-ensures-proof">Contracts: <code>requires</code>, <code>ensures</code>, <code>proof</code><a class="headerlink" href="#contracts-requires-ensures-proof" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="k">type</span> <span class="nc">Clamped</span> <span class="k">is</span> <span class="kt">Integer</span> <span class="k">where</span> <span class="n">low</span> <span class="o">..</span> <span class="n">high</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="kd">transforms</span> <span class="n">clamp</span><span class="p">(</span><span class="n">value</span> <span class="kt">Integer</span><span class="p">,</span> <span class="n">low</span> <span class="kt">Integer</span><span class="p">,</span> <span class="n">high</span> <span class="kt">Integer</span><span class="p">)</span> <span class="nc">Clamped</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>  <span class="kn">requires</span> <span class="n">low</span> <span class="o">&lt;=</span> <span class="n">high</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>  <span class="kn">ensures</span> <span class="n">result</span> <span class="o">&gt;=</span> <span class="n">low</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>  <span class="kn">ensures</span> <span class="n">result</span> <span class="o">&lt;=</span> <span class="n">high</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>  <span class="kn">proof</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>    <span class="na">bounded</span><span class="p">:</span> <span class="nc">Clamped</span> <span class="n">constrains</span> <span class="n">result</span> <span class="n">to</span> <span class="n">low</span><span class="o">..</span><span class="n">high</span> <span class="n">by</span> <span class="n">definition</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="k">from</span>
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>    <span class="n">max</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">min</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">high</span><span class="p">))</span>
</code></pre></div>
<p><code>requires</code> states what must be true before calling the function — the compiler rejects call sites that can't prove it. <code>ensures</code> states what the function guarantees about its result. <code>proof</code> explains <em>why</em> the guarantees hold — the compiler checks that the explanation is consistent with the code. Here, the refinement type <code>Clamped</code> does the heavy lifting — no branching needed.</p>
<p><strong>AI-Resistance keywords (Phase 1+2):</strong></p>
<h3 id="module-level-narrative-domain-temporal">Module-level: <code>narrative</code>, <code>domain</code>, <code>temporal</code><a class="headerlink" href="#module-level-narrative-domain-temporal" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">module</span> <span class="nc">PaymentService</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>  <span class="kn">narrative</span><span class="p">:</span> <span class="s">&quot;&quot;&quot;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="s">  Customers submit payments. Each payment is validated,</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="s">  charged through the gateway, and recorded in the ledger.</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="s">  &quot;&quot;&quot;</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>  <span class="n">domain</span> <span class="nc">Finance</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>  <span class="kn">temporal</span><span class="p">:</span> <span class="n">validate</span> <span class="o">-&gt;</span> <span class="n">charge</span> <span class="o">-&gt;</span> <span class="n">record</span>
</code></pre></div>
<p><code>narrative</code> describes the module's purpose — the compiler rejects functions unrelated to it. <code>domain</code> adapts syntax to the context (e.g. Finance enforces decimal rounding rules). <code>temporal</code> enforces the order things must happen — calling <code>record</code> before <code>charge</code> is a compile error.</p>
<h3 id="function-level-why_not-chosen-near_miss">Function-level: <code>why_not</code>, <code>chosen</code>, <code>near_miss</code><a class="headerlink" href="#function-level-why_not-chosen-near_miss" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="kd">transforms</span> <span class="n">select_gateway</span><span class="p">(</span><span class="n">amount</span> <span class="nc">Price</span><span class="p">,</span> <span class="n">region</span> <span class="nc">Region</span><span class="p">)</span> <span class="nc">Gateway</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>  <span class="kn">why_not</span><span class="p">:</span> <span class="s">&quot;Round-robin ignores regional latency differences&quot;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>  <span class="kn">why_not</span><span class="p">:</span> <span class="s">&quot;Cheapest-first causes thundering herd on one provider&quot;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>  <span class="kn">chosen</span><span class="p">:</span> <span class="s">&quot;Latency-weighted routing balances cost and speed per region&quot;</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="k">from</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>    <span class="n">closest_by_latency</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">available_gateways</span><span class="p">())</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="kd">validates</span> <span class="n">leap_year</span><span class="p">(</span><span class="n">y</span> <span class="nc">Year</span><span class="p">)</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>  <span class="kn">near_miss</span><span class="p">:</span> <span class="mi">1900</span>  <span class="p">=&gt;</span> <span class="kc">false</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>  <span class="kn">near_miss</span><span class="p">:</span> <span class="mi">2000</span>  <span class="p">=&gt;</span> <span class="kc">true</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>  <span class="kn">near_miss</span><span class="p">:</span> <span class="mi">2100</span>  <span class="p">=&gt;</span> <span class="kc">false</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="k">from</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>    <span class="n">y</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">y</span> <span class="o">%</span> <span class="mi">100</span> <span class="kp">!</span><span class="o">=</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">y</span> <span class="o">%</span> <span class="mi">400</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p><code>why_not</code> documents rejected alternatives. <code>chosen</code> explains the selected approach. The compiler checks that the rationale matches the implementation. <code>near_miss</code> provides inputs that <em>almost</em> break the code — proving you understand the exact boundary.</p>
<h3 id="confidence-know-assume-believe">Confidence: <code>know</code>, <code>assume</code>, <code>believe</code><a class="headerlink" href="#confidence-know-assume-believe" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="kd">transforms</span> <span class="n">process_order</span><span class="p">(</span><span class="n">order</span> <span class="nc">Order</span><span class="p">)</span> <span class="nc">Receipt</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>  <span class="kn">know</span><span class="p">:</span> <span class="n">len</span><span class="p">(</span><span class="n">order</span><span class="o">.</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>            <span class="c1">// proven by NonEmpty type — zero cost</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>  <span class="kn">assume</span><span class="p">:</span> <span class="n">order</span><span class="o">.</span><span class="n">total</span> <span class="o">==</span> <span class="n">sum</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>    <span class="c1">// runtime check inserted at boundaries</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>  <span class="kn">believe</span><span class="p">:</span> <span class="n">order</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_verified</span>       <span class="c1">// compiler generates tests to disprove this</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="k">from</span>
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    <span class="c1">// implementation</span>
</code></pre></div>
<p><code>know</code> = the compiler can prove it (free). <code>assume</code> = the compiler adds a runtime check. <code>believe</code> = the compiler tries to break it with generated tests.</p>
<h3 id="intent-intent">Intent: <code>intent</code><a class="headerlink" href="#intent-intent" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="kn">intent</span><span class="p">:</span> <span class="s">&quot;keep only valid records&quot;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="n">result</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">Record</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="k">valid</span> <span class="n">record</span><span class="p">)</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="kn">intent</span><span class="p">:</span> <span class="s">&quot;remove corrupt entries&quot;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="n">result</span> <span class="k">as</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">Record</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">filter</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="k">valid</span> <span class="n">corrupt</span><span class="p">)</span>
</code></pre></div>
<p>Same <code>filter()</code> call, but the compiler checks that the declared <code>intent</code> matches the predicate's actual behavior (keep vs discard).</p>
<h3 id="invariants-invariant_network-satisfies">Invariants: <code>invariant_network</code>, <code>satisfies</code><a class="headerlink" href="#invariants-invariant_network-satisfies" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="kn">invariant_network</span> <span class="nc">AccountingRules</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>  <span class="n">total_assets</span> <span class="o">==</span> <span class="n">total_liabilities</span> <span class="o">+</span> <span class="n">equity</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>  <span class="n">revenue</span> <span class="o">-</span> <span class="n">expenses</span> <span class="o">==</span> <span class="n">net_income</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>  <span class="n">every</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span> <span class="n">preserves</span> <span class="n">total_assets</span> <span class="o">==</span> <span class="n">total_liabilities</span> <span class="o">+</span> <span class="n">equity</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="kd">transforms</span> <span class="n">post_transaction</span><span class="p">(</span><span class="n">ledger</span> <span class="nc">Ledger</span><span class="p">,</span> <span class="n">tx</span> <span class="nc">Transaction</span><span class="p">)</span> <span class="nc">Ledger</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>  <span class="kn">satisfies</span> <span class="nc">AccountingRules</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="k">from</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>    <span class="c1">// implementation — compiler verifies the rules hold after every change</span>
</code></pre></div>
<p><code>invariant_network</code> defines rules that must always hold together. <code>satisfies</code> declares that a function obeys those rules.</p>
<h2 id="error-propagation">Error Propagation<a class="headerlink" href="#error-propagation" title="Permanent link">&para;</a></h2>
<p><code>!</code> marks fallibility — on declarations it means "this function can fail", at call sites it propagates the error. Only IO verbs (<code>inputs</code>, <code>outputs</code>) can use <code>!</code>. Pure functions encode failure in the return type (<code>Result&lt;T, E&gt;</code>) and handle it with <code>match</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="k">main</span><span class="p">()</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="kt">Unit</span><span class="p">,</span> <span class="nc">Error</span><span class="o">&gt;</span><span class="kp">!</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="k">from</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>    <span class="n">config</span> <span class="k">as</span> <span class="nc">Config</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s">&quot;app.yaml&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>    <span class="n">db</span> <span class="k">as</span> <span class="nc">Database</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">db_url</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a>    <span class="n">serve</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">port</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span><span class="kp">!</span>
</code></pre></div>
<h2 id="complete-example-restful-server">Complete Example: RESTful Server<a class="headerlink" href="#complete-example-restful-server" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="k">type</span> <span class="nc">Port</span> <span class="k">is</span> <span class="kt">Integer</span><span class="p">:[</span><span class="mi">16</span> <span class="nc">Unsigned</span><span class="p">]</span> <span class="k">where</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">65535</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="k">type</span> <span class="nc">Route</span> <span class="k">is</span> <span class="nc">Get</span><span class="p">(</span><span class="n">path</span> <span class="kt">String</span><span class="p">)</span> <span class="p">|</span> <span class="nc">Post</span><span class="p">(</span><span class="n">path</span> <span class="kt">String</span><span class="p">)</span> <span class="p">|</span> <span class="nc">Delete</span><span class="p">(</span><span class="n">path</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="k">type</span> <span class="nc">User</span> <span class="k">is</span>
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>  <span class="n">id</span> <span class="kt">Integer</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>  <span class="n">name</span> <span class="kt">String</span>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>  <span class="n">email</span> <span class="kt">String</span>
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a><span class="cs">/// Checks whether a string is a valid email address.</span>
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a><span class="kd">validates</span> <span class="n">email</span><span class="p">(</span><span class="n">address</span> <span class="kt">String</span><span class="p">)</span>
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a><span class="k">from</span>
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>    <span class="n">contains</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;@&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">contains</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s">&quot;.&quot;</span><span class="p">)</span>
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a><span class="cs">/// Retrieves all users from the database.</span>
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a><span class="kd">inputs</span> <span class="n">users</span><span class="p">(</span><span class="n">db</span> <span class="nc">Database</span><span class="p">)</span> <span class="kt">List</span><span class="o">&lt;</span><span class="nc">User</span><span class="o">&gt;</span><span class="kp">!</span>
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a><span class="k">from</span>
<a id="__codelineno-25-17" name="__codelineno-25-17" href="#__codelineno-25-17"></a>    <span class="n">query</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;SELECT * FROM users&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-25-18" name="__codelineno-25-18" href="#__codelineno-25-18"></a>
<a id="__codelineno-25-19" name="__codelineno-25-19" href="#__codelineno-25-19"></a><span class="cs">/// Creates a new user from a request body.</span>
<a id="__codelineno-25-20" name="__codelineno-25-20" href="#__codelineno-25-20"></a><span class="kd">outputs</span> <span class="n">create</span><span class="p">(</span><span class="n">db</span> <span class="nc">Database</span><span class="p">,</span> <span class="n">body</span> <span class="kt">String</span><span class="p">)</span> <span class="nc">User</span><span class="kp">!</span>
<a id="__codelineno-25-21" name="__codelineno-25-21" href="#__codelineno-25-21"></a>  <span class="kn">ensures</span> <span class="n">email</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
<a id="__codelineno-25-22" name="__codelineno-25-22" href="#__codelineno-25-22"></a>  <span class="kn">proof</span>
<a id="__codelineno-25-23" name="__codelineno-25-23" href="#__codelineno-25-23"></a>    <span class="na">email_valid</span><span class="p">:</span> <span class="n">decode</span> <span class="kd">validates</span> <span class="n">the</span> <span class="n">email</span> <span class="n">field</span> <span class="n">before</span> <span class="n">insertion</span>
<a id="__codelineno-25-24" name="__codelineno-25-24" href="#__codelineno-25-24"></a><span class="k">from</span>
<a id="__codelineno-25-25" name="__codelineno-25-25" href="#__codelineno-25-25"></a>    <span class="n">user</span> <span class="k">as</span> <span class="nc">User</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">body</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-25-26" name="__codelineno-25-26" href="#__codelineno-25-26"></a>    <span class="n">insert</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="s">&quot;users&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-25-27" name="__codelineno-25-27" href="#__codelineno-25-27"></a>    <span class="n">user</span>
<a id="__codelineno-25-28" name="__codelineno-25-28" href="#__codelineno-25-28"></a>
<a id="__codelineno-25-29" name="__codelineno-25-29" href="#__codelineno-25-29"></a><span class="cs">/// Routes incoming HTTP requests.</span>
<a id="__codelineno-25-30" name="__codelineno-25-30" href="#__codelineno-25-30"></a><span class="kd">inputs</span> <span class="n">request</span><span class="p">(</span><span class="n">route</span> <span class="nc">Route</span><span class="p">,</span> <span class="n">body</span> <span class="kt">String</span><span class="p">,</span> <span class="n">db</span> <span class="nc">Database</span><span class="p">)</span> <span class="nc">Response</span><span class="kp">!</span>
<a id="__codelineno-25-31" name="__codelineno-25-31" href="#__codelineno-25-31"></a><span class="k">from</span>
<a id="__codelineno-25-32" name="__codelineno-25-32" href="#__codelineno-25-32"></a>    <span class="nc">Get</span><span class="p">(</span><span class="s">&quot;/health&quot;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">ok</span><span class="p">(</span><span class="s">&quot;healthy&quot;</span><span class="p">)</span>
<a id="__codelineno-25-33" name="__codelineno-25-33" href="#__codelineno-25-33"></a>    <span class="nc">Get</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">)</span>  <span class="p">=&gt;</span> <span class="n">users</span><span class="p">(</span><span class="n">db</span><span class="p">)</span><span class="kp">!</span> <span class="o">|&gt;</span> <span class="n">encode</span> <span class="o">|&gt;</span> <span class="n">ok</span>
<a id="__codelineno-25-34" name="__codelineno-25-34" href="#__codelineno-25-34"></a>    <span class="nc">Post</span><span class="p">(</span><span class="s">&quot;/users&quot;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">create</span><span class="p">(</span><span class="n">db</span><span class="p">,</span> <span class="n">body</span><span class="p">)</span><span class="kp">!</span> <span class="o">|&gt;</span> <span class="n">encode</span> <span class="o">|&gt;</span> <span class="n">created</span>
<a id="__codelineno-25-35" name="__codelineno-25-35" href="#__codelineno-25-35"></a>    <span class="n">_</span>              <span class="p">=&gt;</span> <span class="n">not_found</span><span class="p">()</span>
<a id="__codelineno-25-36" name="__codelineno-25-36" href="#__codelineno-25-36"></a>
<a id="__codelineno-25-37" name="__codelineno-25-37" href="#__codelineno-25-37"></a><span class="cs">/// Application entry point — no verb, main is special.</span>
<a id="__codelineno-25-38" name="__codelineno-25-38" href="#__codelineno-25-38"></a><span class="k">main</span><span class="p">()</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="kt">Unit</span><span class="p">,</span> <span class="nc">Error</span><span class="o">&gt;</span><span class="kp">!</span>
<a id="__codelineno-25-39" name="__codelineno-25-39" href="#__codelineno-25-39"></a><span class="k">from</span>
<a id="__codelineno-25-40" name="__codelineno-25-40" href="#__codelineno-25-40"></a>    <span class="n">port</span> <span class="k">as</span> <span class="nc">Port</span> <span class="o">=</span> <span class="mi">8080</span>
<a id="__codelineno-25-41" name="__codelineno-25-41" href="#__codelineno-25-41"></a>    <span class="n">db</span> <span class="k">as</span> <span class="nc">Database</span> <span class="o">=</span> <span class="n">connect</span><span class="p">(</span><span class="s">&quot;postgres://localhost/app&quot;</span><span class="p">)</span><span class="kp">!</span>
<a id="__codelineno-25-42" name="__codelineno-25-42" href="#__codelineno-25-42"></a>    <span class="n">server</span> <span class="k">as</span> <span class="nc">Server</span> <span class="o">=</span> <span class="n">new_server</span><span class="p">()</span>
<a id="__codelineno-25-43" name="__codelineno-25-43" href="#__codelineno-25-43"></a>    <span class="n">route</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
<a id="__codelineno-25-44" name="__codelineno-25-44" href="#__codelineno-25-44"></a>    <span class="n">listen</span><span class="p">(</span><span class="n">server</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span><span class="kp">!</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.sections", "navigation.expand", "navigation.top", "content.code.copy", "toc.integrate"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>