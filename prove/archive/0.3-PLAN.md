# Prove v0.3 — Stdlib Cleanup

## Goal

Remove legacy stdlib modules and clean the slate before 1.0 self-hosting
work begins. Only `InputOutput` survives — everything else is removed
and replaced by the new modules in the 1.0 plan.

---

## Removals

| File | Reason |
|------|--------|
| `stdlib/string_utils.prv` | Trivial wrappers around builtins. Replaced by `Character` in 1.0. |
| `stdlib/list_utils.prv` | Single wrapper around `len()`. Replaced by `List` module (see below). |
| `stdlib/json.prv` | Encode-only, no decode. Replaced by `Parse` module in 1.0. |
| `stdlib/regex.prv` | Not needed for compiler. Re-add post-1.0 if needed. |
| `stdlib/http.prv` | Not needed for compiler. Re-add post-1.0 if needed. |

**Kept:** `stdlib/input_output.prv` — foundation for 1.0 channel extensions.

---

## New: `List` Module

Pure Prove module (no C backing). Absorbs sorting from the removed
`Sort` module and provides common list operations.

```prove
module List
  narrative: "List operations and sorting."
```

| Function | Signature |
|----------|-----------|
| `sort` | `transforms sort(items List<String>) List<String>` |
| `sort_by` | `transforms sort_by(items List<V>, key fn(V) Integer) List<V>` |
| `length` | `reads length(items List<V>) Integer` |

Additional list functions (map, filter, reduce, find, any, all) to be
evaluated — some may already be builtins.

---

## Cleanup Tasks

1. Remove the 5 legacy `.prv` files listed above
2. Remove `examples/http_server/` (imports `Http` module)
3. Remove C backing: `prove_http.c`, `prove_http.h` from `src/prove/runtime/`
4. Update `c_runtime.py` — remove `prove_http.c/h` from `_RUNTIME_FILES`
5. Update `stdlib_loader.py` — unregister removed modules from `_STDLIB_MODULES`,
   `_MODULE_DISPLAY_NAMES`, and `_ALIAS_KEYS`
6. Remove/update tests that reference removed modules:
   - `test_checker.py` — `test_json_import_resolves()`
   - `test_builder.py` — `test_http_server_compiles()`
   - `test_lsp.py` — `test_index_contains_encode_string()`,
     `test_index_contains_type_variants()`, `test_index_contains_type_names()`
   - `test_formatter.py` — references `examples/http_server/`
7. Verify all tests still pass after removal
8. Rename `input_output.prv` module declaration from `Io` to `InputOutput`

---

## Verification

- `python -m pytest tests/ -v` passes with no regressions
- `prove check` and `prove build` work on all examples
- No references to removed modules remain in compiler source
